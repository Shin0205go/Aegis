# 自然言語ポリシー記述ガイド

## 📋 目次

1. [はじめに](#はじめに)
2. [基本構造](#基本構造)
3. [ポリシー記述のベストプラクティス](#ポリシー記述のベストプラクティス)
4. [条件記述のパターン](#条件記述のパターン)
5. [制約と義務の定義](#制約と義務の定義)
6. [実践的な例](#実践的な例)
7. [よくある質問](#よくある質問)

## はじめに

AEGISの自然言語ポリシーは、従来のXACMLやODRLなどの複雑なXML記述を必要とせず、日本語の自然文でアクセス制御ポリシーを記述できる革新的な機能です。このガイドでは、効果的なポリシーの書き方を学びます。

### 自然言語ポリシーの利点

- **直感的**: 技術者でなくても理解・作成可能
- **表現力**: 複雑な条件も自然に表現
- **保守性**: 読みやすく、意図が明確
- **柔軟性**: AIが文脈を理解して判定

## 基本構造

### 推奨されるポリシー構造

```
【ポリシー名】

概要：
- このポリシーの目的と適用範囲

基本原則：
- 許可される条件
- 必要な要件

制限事項：
- 禁止される操作
- アクセス制限

必須対応：
- 実行すべき義務
- 記録要件

例外条件：（オプション）
- 特別な許可条件
- 緊急時の対応
```

### シンプルな例

```
【開発環境アクセスポリシー】

概要：
- 開発チームの開発環境へのアクセスを制御

基本原則：
- 開発チームメンバーは開発環境に自由にアクセス可能
- アクセスは平日の勤務時間内を推奨

制限事項：
- 本番データの開発環境へのコピー禁止
- 外部ネットワークからの直接アクセス禁止

必須対応：
- すべてのアクセスログを記録
- 機密データアクセス時は上長に通知
```

## ポリシー記述のベストプラクティス

### 1. 明確で具体的な表現を使う

❌ 悪い例：
```
適切な人だけがアクセスできる
```

✅ 良い例：
```
営業部門の正社員かつクリアランスレベル3以上の者のみアクセス可能
```

### 2. 条件は肯定文で書く

❌ 悪い例：
```
管理者でない場合はアクセスできない
```

✅ 良い例：
```
管理者権限を持つユーザーのみアクセス可能
```

### 3. 時間条件は具体的に

```
営業時間内（平日9:00-18:00、日本時間）のみアクセス可能
緊急メンテナンス時は24時間アクセスを許可
```

### 4. データ分類を明確に

```
- 公開情報: 制限なし
- 内部情報: 社員のみアクセス可能
- 機密情報: 承認されたプロジェクトメンバーのみ
- 極秘情報: 役員承認必須
```

## 条件記述のパターン

### 時間ベースの条件

```
# 基本的な時間制限
営業時間内（平日9:00-18:00）のみアクセス可能

# 曜日指定
月曜日から金曜日のみ許可

# 期間限定
2024年4月1日から2024年9月30日までの期間限定でアクセス許可

# 定期メンテナンス
毎週日曜日の2:00-5:00はメンテナンスのためアクセス禁止
```

### ロールベースの条件

```
# 部署による制限
経理部門の社員のみアクセス可能

# 役職による制限
課長以上の役職者のみ承認権限あり

# 複合条件
営業部門の正社員で、かつ3年以上の勤続年数がある者
```

### リソースベースの条件

```
# データ種別による制限
個人情報を含むファイルは参照のみ可能、編集不可

# ファイル名パターン
"confidential-"で始まるファイルは管理者のみアクセス可能

# データ量制限
一度に1000件を超えるレコードの一括ダウンロード禁止
```

### 場所・環境ベースの条件

```
# ネットワーク制限
社内ネットワークからのみアクセス可能

# VPN要件
社外からのアクセスはVPN接続必須

# デバイス制限
会社支給のデバイスからのみアクセス許可
```

## 制約と義務の定義

### 制約（Constraints）

制約は、アクセスが許可された場合でも適用される制限です。

```
制約：
- 個人情報はマスキング処理を適用
- ダウンロードは1日100件まで
- 閲覧のみ許可、編集・削除は禁止
- アクセス可能時間は1セッション最大2時間
```

### 義務（Obligations）

義務は、アクセス時に必ず実行すべきアクションです。

```
義務：
- アクセスログを詳細に記録
- データ管理者にメール通知
- 30日後に自動的にアクセス権限を失効
- アクセス理由の記録を必須とする
```

## 実践的な例

### 例1: 顧客データアクセスポリシー

```
【顧客データアクセスポリシー】

概要：
- 顧客の個人情報および取引データへのアクセスを厳格に制御

基本原則：
- カスタマーサポート部門は顧客対応目的でのみアクセス可能
- 営業部門は担当顧客のデータのみアクセス可能
- アクセスは営業時間内（平日9:00-18:00）を原則とする

制限事項：
- 一度に100件を超える顧客データの一括取得禁止
- 個人情報の外部システムへの転送禁止
- 退職者の顧客データアクセス即時停止

必須対応：
- すべてのアクセスの詳細ログ記録（誰が、いつ、何を、なぜ）
- VIPステータスの顧客データアクセス時は部門長に即時通知
- 月次でアクセスレポートを生成し、コンプライアンス部門に提出

例外条件：
- 緊急の顧客対応が必要な場合、承認を得て時間外アクセス可能
- 監査部門は監査目的で全データへの読み取りアクセス可能
```

### 例2: 財務システムアクセスポリシー

```
【財務システムアクセスポリシー】

概要：
- 会計システムおよび財務データへのアクセスを制御し、SOX法準拠を確保

基本原則：
- 経理部門の正社員のみ基本アクセス権限を付与
- 職務分離の原則に基づき、承認者と実行者を分離
- すべての変更操作は承認ワークフロー必須

制限事項：
- 決算期間中（月末3営業日）は読み取り専用
- 1000万円を超える取引は2名以上の承認必須
- 過去データの変更は原則禁止（修正仕訳で対応）

必須対応：
- すべての操作の監査証跡を7年間保存
- 異常な金額の取引検知時は即座にCFOに通知
- 四半期ごとにアクセス権限の棚卸しを実施

セキュリティ要件：
- 多要素認証必須
- セッションタイムアウト15分
- 同一ユーザーの複数同時ログイン禁止
```

### 例3: 開発環境アクセスポリシー

```
【開発環境アクセスポリシー】

概要：
- 開発・テスト環境へのアクセスを管理し、本番環境への影響を防止

基本原則：
- 開発チームメンバーは所属プロジェクトの環境にアクセス可能
- コードレビュー完了後のみ本番相当環境へのデプロイ許可
- 開発環境は24時間アクセス可能

制限事項：
- 本番データの開発環境への直接コピー禁止
- テストデータは匿名化処理必須
- 未承認の外部ライブラリ使用禁止

必須対応：
- ソースコード変更はGitで全履歴管理
- デプロイ操作はすべてログ記録
- 脆弱性スキャンを週次で実行

データ管理：
- テストデータは30日で自動削除
- 個人情報を含むテストデータ作成時は申請必須
- バックアップは7日間保持
```

## よくある質問

### Q1: どの程度詳細に書くべきですか？

A: ポリシーは具体的であるほど良いですが、過度に詳細にすると柔軟性が失われます。以下のバランスを心がけてください：

- **具体的に書くべき項目**: 時間、役職、データ分類
- **抽象的でも良い項目**: 目的、一般的な原則

### Q2: 複数の条件を組み合わせる方法は？

A: 自然な日本語で接続詞を使って表現してください：

```
営業部門の正社員で、かつ入社3年以上、さらに部長の承認を得た者
```

### Q3: 否定条件はどう書けばいいですか？

A: 基本的に肯定文で書くことを推奨しますが、必要な場合は明確に：

```
以下の条件に該当する場合はアクセスを拒否：
- 契約社員および派遣社員
- 試用期間中の社員
- 過去にセキュリティ違反の記録がある者
```

### Q4: 一時的な例外はどう扱いますか？

A: 期間や条件を明確にして例外セクションに記載：

```
例外条件：
- 2024年12月31日までの期間限定で、監査対応チームに特別アクセス権限を付与
- システム障害時は、緊急対応チームに限り24時間アクセスを許可
```

### Q5: ポリシーの優先順位は？

A: より具体的なポリシーが優先されます。また、明示的にポリシーに優先度を記載することも可能です：

```
優先度: 高
適用順序: 1
他のポリシーとの競合時は本ポリシーを優先
```

## まとめ

効果的な自然言語ポリシーを書くためのポイント：

1. **明確性**: 曖昧な表現を避け、具体的に記述
2. **構造化**: 推奨構造に従って整理
3. **完全性**: 必要な条件をすべて含める
4. **保守性**: 定期的な見直しを前提に記述
5. **実用性**: 実際の運用を考慮した現実的な内容

自然言語ポリシーにより、技術的な知識がなくても、ビジネス要件を直接ポリシーとして表現できます。このガイドを参考に、組織のニーズに合ったポリシーを作成してください。